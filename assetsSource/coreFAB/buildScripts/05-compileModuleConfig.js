/*============================================================================*\
	DO NOT EDIT THIS FILE. THIS IS A CORE FILE.
/*============================================================================*/

module.exports = function(grunt, vars) {
	// Add module compile
	grunt.file.expand(vars.assetsSource + '/modules/compile/*').forEach(function(i) {
		var moduleName = i.split('/').pop();

		// Copy the module primary less file into place
		grunt.file.copy(
			vars.assetsSource + '/coreFAB/css/module.less',
			i + '/css/module.less'
		);

		// Configure module Less
		vars.conf.lessFiles[vars.assetsPath + '/modules/' + moduleName + '/css/style.min.css'] = i + '/css/module.less';

		// Configure module JS
		vars.conf.jsFiles[vars.assetsPath + '/modules/' + moduleName + '/js/script.min.js'] = [];
		vars.conf.jsFiles[vars.assetsPath + '/modules/' + moduleName + '/js/script.min.js'].push(i + '/js/config.js');
		vars.conf.jsFiles[vars.assetsPath + '/modules/' + moduleName + '/js/script.min.js'].push(i + '/js/build/**/*.js');
	});

	// Return the modified variables
	return vars;
};
